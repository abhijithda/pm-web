<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plugin Manager</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <header>
    <div class="header-left"></div>
    <div class="header-center">
      <h1>Plugin Manager [PM]</h1>
    </div>
    <div class="header-right"></div>
  </header>

  <main>
    <section class="import-plugins-section">
      <h2>Import Plugins</h2>
      <!-- Import toolbar: Profile, URL and file (vertical) with Load action -->
      <div class="import-toolbar">
        <div class="import-row">
          <label style="font-weight:600;color:var(--muted);display:block;margin-bottom:6px">Profile:</label>
          <select id="sample-select" class="sample-select">
            <option value="" selected disabled hidden>Select Profile</option>
            <option value="prereboot">Prereboot (JSON)</option>
            <option value="preupgrade">Preupgrade (YAML)</option>
          </select>
          <!-- Toast container for notifications (move outside import toolbar for global visibility) -->
          <div id="toast-container" style="position:fixed;top:24px;right:24px;z-index:9999;pointer-events:none"></div>
        </div>

        <div class="import-row">
          <label style="font-weight:600;color:var(--muted);display:block;margin-bottom:6px">URL:</label>
          <input id="import-url" type="url" placeholder="https://raw.githubusercontent.com/.../plugins.json"
            class="import-url-input">
        </div>

        <div class="import-row">
          <label style="font-weight:600;color:var(--muted);display:block;margin-bottom:6px">Browse file:</label>
          <input type="file" id="import-file" accept=".json,.yaml,.yml" class="import-file-input">
        </div>

        <div class="import-row" style="margin-top:8px">
          <button id="load-btn" type="button">Load</button>
        </div>
      </div>
    </section>

    <section class="add-plugin-section">
      <h2>Add Plugin</h2>
      <form id="plugin-form">
        <label>Plugin Name<input id="name" required></label>
        <label>Description<input id="description"></label>
        <label>Command<input id="command"></label>
        <label>Dependencies (comma separated)<input id="dependencies" placeholder="pluginA,pluginB"></label>
        <div class="form-actions">
          <button type="submit">Add Plugin</button>
          <button type="button" id="clear-form">Clear</button>
        </div>
      </form>
    </section>
  </main>

  <!-- Preview / edit panel shown above Plugins list -->
  <div id="global-preview" class="global-preview" role="region" aria-labelledby="preview-title">
    <div class="preview-header">
      <h3 id="preview-title">Details</h3>
    </div>
    <div class="import-preview">
      <div id="manual-editor"
        style="width:100%;height:320px;border-radius:6px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.02);">
      </div>
    </div>
  </div>

  <!-- Action bar (List, Run, Export, Save) placed under the editor per mockup -->
  <div class="bottom-actions">
    <button id="action-list-btn">List</button>
    <button id="start-all">Run</button>
    <button id="export">Export (JSON/YAML)</button>
    <button id="save-profile">Save (TODO)</button>
  </div>



  <div>
    <h2>Plugins</h2>
    <div id="plugins"></div>
  </div>

  <footer>
    <small>This is a frontend-only demo that simulates plugin execution for the plugin-manager.</small>
  </footer>

  <!-- YAML support for importing/exporting plugin lists -->
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <!-- Ace editor for the Plugin Details area -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.15.0/ace.js"
    integrity="sha512-0F3o6xw6o+GJz0g6g9i7v3FQg2FvQ2bWw6g1d6d5Pm7iF9h1xKk1q1FfZ3p2Msd9cG2mL6O7i7Qd1p3z8a9L1w=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="app.js"></script>
</body>

</html>